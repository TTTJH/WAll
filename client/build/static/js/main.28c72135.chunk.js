(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{224:function(e,a,t){e.exports=t(491)},256:function(e,a,t){},386:function(e,a,t){},393:function(e,a,t){},396:function(e,a,t){},400:function(e,a,t){},488:function(e,a,t){},490:function(e,a,t){},491:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(9),o=t.n(s),c=t(109),l=t(57),i=t(36),m=t(21),p=t(22),u=t(25),d=t(23),f=t(24),h=function(e){function a(){return Object(m.a)(this,a),Object(u.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(f.a)(a,e),Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("span",{role:"img"},"Chatroom"))}}]),a}(n.Component),v=(t(74),t(19)),E=(t(157),t(28)),g=(t(122),t(43)),y=(t(67),t(8)),b=(t(85),t(27)),N=t(26),w=t.n(N),x=t(49),k="account_success",O="account_error",j="account_clear",C="recommend_success",_="recommend_error",S="recommend_clear",P="note_success",D="note_error",T="get_notes_success",L="get_notes_error",F=t(150),I=t.n(F),B=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise(function(n,r){var s;if("GET"===t){var o="";Object.keys(a).map(function(e,t){o+="".concat(e,"=").concat(a[e],"& ")}),o=e+o.slice(0,o.length-1),s=I.a.get(o)}else s=I.a.post(e,a);s.then(function(e){n(e.data)},function(e){r(e)})})},U=function(e){return B("/register",e,"POST")},q=function(e){return B("/login",e,"POST")},A=function(e){return B("/note",e,"POST")},z=function(e){return{type:k,data:e}},R=function(e){return{type:O,data:e}},M=function(){return{type:j}},Y=function(e){return{type:_,data:e}},V=function(e){return{type:D,data:e}},H=function(e){return{type:L,data:e}},W=function(){return function(){var e=Object(x.a)(w.a.mark(function e(a){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("/autoLogin");case 2:1===(t=e.sent).code?a(z(t.data)):a(R(t.data));case 4:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()},G=(t(256),function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){t.props.account_clear(),e.preventDefault(),t.props.form.validateFields(function(e,a){e||t.props.login(a).then(function(e){t.props.user.username&&!t.props.user.msg?(b.a.success("\u6b22\u8fce\u56de\u6765\ud83e\udd84"),t.props.history.replace("/")):t.props.user.msg&&(b.a.warning(t.props.user.msg),t.props.user.msg="")},function(e){b.a.warning(t.props.user.msg)})})},t.gotoRegister=function(){t.props.history.push("/register")},t}return Object(f.a)(a,e),Object(p.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(E.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(E.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(g.a,{prefix:r.a.createElement(y.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(E.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(g.a,{prefix:r.a.createElement(y.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(E.a.Item,null,r.a.createElement("div",{className:"login-spec-btns"},r.a.createElement(v.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),r.a.createElement(v.a,{onClick:this.gotoRegister,id:"gotoRegister",type:"primary",htmlType:"submit",className:"login-form-button"},"\u53bb\u6ce8\u518c\u4e00\u4e2a!"))))}}]),a}(n.Component)),J=E.a.create({name:"normal_login"})(G),X=Object(i.b)(function(e){return{user:e.user}},{login:function(e){return function(){var a=Object(x.a)(w.a.mark(function a(t){var n;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q(e);case 2:1===(n=a.sent).code?t(z(n.data)):t(R(n.data));case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},account_clear:M})(J),K=(t(383),t(119)),Q=(t(181),t(82)),Z=t(46),$=(t(386),function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={confirmDirty:!1,autoCompleteResult:[]},t.handleSubmit=function(e){e.preventDefault(),t.props.form.validateFieldsAndScroll(function(e,a){e||t.props.register(a).then(function(e){t.props.user.username&&!t.props.user.msg?(b.a.success("\u6b22\u8fce\u5165\u9a7b\uff0c\u5feb\u53bb\u5bfb\u627e\u4e50\u8da3\u5427\ud83e\udd84"),t.props.history.replace("/personal")):t.props.user.msg&&(b.a.warning(t.props.user.msg),t.props.user.msg="")},function(e){b.a.warning(t.props.user.msg),t.props.user.msg=""})})},t.handleConfirmBlur=function(e){var a=e.target.value;t.setState({confirmDirty:t.state.confirmDirty||!!a})},t.compareToFirstPassword=function(e,a,n){var r=t.props.form;a&&a!==r.getFieldValue("password")?n("Two passwords that you enter is inconsistent!"):n()},t.validateToNextPassword=function(e,a,n){var r=t.props.form;a&&t.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},t}return Object(f.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.form.setFieldsValue({sex:"male"});var e=document.querySelector(".register-wrapper");this.RegisterScroll=new Z.a(e,{scrollY:!0,click:!0})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"register-wrapper"},r.a.createElement("div",{className:"register-container"},r.a.createElement(E.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),r.a.createElement(E.a.Item,{label:"Username"},e("username",{rules:[{message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(g.a,null))),r.a.createElement(E.a.Item,{label:"Password",hasFeedback:!0},e("password",{rules:[{required:!0,message:"Please input your password!"},{validator:this.validateToNextPassword}]})(r.a.createElement(g.a.Password,null))),r.a.createElement(E.a.Item,{label:"Confirm Password",hasFeedback:!0},e("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(g.a.Password,{onBlur:this.handleConfirmBlur}))),r.a.createElement(E.a.Item,{label:r.a.createElement("span",null,"\u6027\u522b\xa0",r.a.createElement(Q.a,{title:"What do you want others to call you?"},r.a.createElement(y.a,{type:"question-circle-o"})))},e("sex",{rules:[{required:!0,message:"Please confirm your password!"}]})(r.a.createElement(K.a.Group,{buttonStyle:"solid"},r.a.createElement(K.a.Button,{value:"male"},"\u7537\u751f"),r.a.createElement(K.a.Button,{value:"female"},"\u5973\u751f")))),r.a.createElement(E.a.Item,{label:r.a.createElement("span",null,"Nickname\xa0",r.a.createElement(Q.a,{title:"What do you want others to call you?"},r.a.createElement(y.a,{type:"question-circle-o"})))},e("nickName",{rules:[{required:!0,message:"Please input your nickname!",whitespace:!0}]})(r.a.createElement(g.a,null))),r.a.createElement(E.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement("div",{className:"register-spec-btns"},r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"Register"),r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"\u53bb\u767b\u5165"))))))}}]),a}(n.Component)),ee=E.a.create({name:"register"})($),ae=Object(i.b)(function(e){return{user:e.user}},{register:function(e){return console.log(e),function(){var a=Object(x.a)(w.a.mark(function a(t){var n;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,U(e);case 2:1===(n=a.sent).code?t(z(n.data)):t(R(n.data));case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}})(ee),te=(t(389),t(156)),ne=(t(492),t(220)),re=t(73),se=t.n(re),oe=(t(393),y.a.createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_1368816_a7lhoitsitr.js"})),ce=(ne.a.Meta,function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={routeArr:["login","register","main","chatroom"],loading:!0},t.recommend_refresh=function(){t.props.recommend_clear(),t.props.recommend(),t.scroll.scrollTo(0,0,800)},t.like=function(){t.props.user.username||t.props.history.push("/login")},t.comment=function(){t.props.user.username||t.props.history.push("/login")},t.share=function(){t.props.user.username||t.props.history.push("/login")},t}return Object(f.a)(a,e),Object(p.a)(a,[{key:"componentWillMount",value:function(){this.props.recommend()}},{key:"componentDidMount",value:function(){this.props.getNotes();var e=this.refs.card;this.scroll=new Z.a(e,{scrollY:!1,scrollX:!0,click:!1});var a=document.querySelector(".main-wrapper");this.rootScroll=new Z.a(a,{scrollY:!0,click:!0})}},{key:"render",value:function(){var e=this,a=this.props.user.username,t=this.props,n=t.recommend_users,s=t.notes,o=se.a.get("_id"),c=this.state.loading;return!a&&o&&this.props.autoLogin(),s==[]?null:r.a.createElement("div",{id:"main",className:"main-wrapper"},r.a.createElement("div",{className:"main-container"},r.a.createElement("div",{className:"recommend"},r.a.createElement("p",{className:"recommend-txt1"},"Classroom:"),r.a.createElement("p",{className:"recommend-txt2"},"Friends:"),r.a.createElement("div",{ref:"card",className:"card-box"},r.a.createElement("div",{className:"card-container"},0===n.length?[0,1,2,3].map(function(e,a){return r.a.createElement("div",{className:"card",key:a},r.a.createElement(te.a,{loading:c,avatar:!0,active:!0},r.a.createElement("div",{className:"card-content"})))}):n.map(function(e,a){return r.a.createElement("div",{className:"card",key:a},r.a.createElement("div",{className:"card-content"},r.a.createElement("img",{src:e.avatarUrl,alt:""}),r.a.createElement("span",{className:"card-content-txt card-content-txt1"},r.a.createElement("span",{className:"recommend-nickName"},e.nickName),"\xa0","male"===e.sex?r.a.createElement(oe,{type:"icon-male"}):r.a.createElement(oe,{type:"icon-female"})),r.a.createElement("span",{className:"card-content-txt card-content-txt2"},"\u5e72\uff0c\u6211\u8fd8\u6ca1\u6dfb\u52a0\u81ea\u6211\u4ecb\u7ecd")))}),r.a.createElement("div",{onClick:this.recommend_refresh,className:"recommend-refresh"},r.a.createElement(y.a,{type:"sync"}))))),r.a.createElement("div",{className:"post"},r.a.createElement("p",{className:"post-txt1"},"Post:"),r.a.createElement("div",{className:"post-box",ref:"post"},r.a.createElement("div",{className:"post-container"},0===s.length?Array.from({length:10},function(){return 0}).map(function(e,a){return r.a.createElement(te.a,{key:a,loading:c,avatar:!0,active:!0},r.a.createElement("div",{className:"card-content"}))}):s.map(function(a,t){return r.a.createElement("div",{key:t,className:"post-card"},r.a.createElement("div",{className:"tag"},"hot  ",r.a.createElement(oe,{type:"icon-hot2-copy"})),r.a.createElement("div",{className:"post-content"},a.content),r.a.createElement("div",{className:"post-img-Box"},0!==a.imgs_url.length?a.imgs_url.map(function(e,a){return r.a.createElement("div",{key:a,className:"post-img-box"},r.a.createElement("img",{src:e,alt:""}))}):null),r.a.createElement("div",{className:"post-avatar-box"},r.a.createElement("div",{className:"post-avatar"},r.a.createElement("img",{src:a.avatarUrl,alt:""})),r.a.createElement("span",null,a.nickName)),r.a.createElement("div",{className:"post-handles"},r.a.createElement("div",{className:"post-handle",onClick:e.like},r.a.createElement(oe,{type:"icon-like"}),r.a.createElement("span",null,a.like)),r.a.createElement("div",{className:"post-handle",onClick:e.comment},r.a.createElement(oe,{type:"icon-comment"}),r.a.createElement("span",null,"48")),r.a.createElement("div",{className:"post-handle",onClick:e.share},r.a.createElement(oe,{type:"icon-share"}),r.a.createElement("span",null,a.share))))}))))))}}]),a}(n.Component)),le=Object(i.b)(function(e){return{user:e.user,recommend_users:e.recommend,notes:e.notes}},{autoLogin:W,recommend:function(){return function(){var e=Object(x.a)(w.a.mark(function e(a){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("/recommend");case 2:1===(t=e.sent).code?a((n=t.data,{type:C,data:n})):a(Y(t.data));case 4:case"end":return e.stop()}var n},e)}));return function(a){return e.apply(this,arguments)}}()},recommend_clear:function(){return{type:S}},getNotes:function(){return function(){var e=Object(x.a)(w.a.mark(function e(a){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("/getNotes");case 2:1===(t=e.sent).code?a((n=t.data,{type:T,data:n})):a(H(t.data));case 4:case"end":return e.stop()}var n},e)}));return function(a){return e.apply(this,arguments)}}()}})(ce),ie=(t(396),function(e){function a(){return Object(m.a)(this,a),Object(u.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(f.a)(a,e),Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"})}}]),a}(n.Component)),me=(t(204),t(116)),pe=(t(182),t(117)),ue=(t(400),pe.a.confirm),de=y.a.createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_1368816_anek3qab0ai.js"}),fe=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).avatarProps={name:"file",action:"/avatarUpload",headers:{authorization:"authorization-text"},onChange:function(e){(e.file.status,"done"===e.file.status)?(document.querySelectorAll(".ant-upload-list-item-done").forEach(function(e){e.style.display="none"}),b.a.success("\u5934\u50cf\u4e0a\u4f20\u6210\u529f"),t.props.autoLogin()):"error"===e.file.status&&b.a.error("\u5934\u50cf\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")}},t.gotoLogin=function(){t.props.history.push("/login")},t.signout=function(){se.a.remove("_id"),b.a.warning("\u5df2\u6210\u529f\u9000\u51fa\ud83d\ude4a"),t.props.history.replace("/login"),t.props.account_clear()},t.showDeleteConfirm=function(){var e=t.signout;ue({title:"Are you sure delete this task?",content:"Some descriptions",okText:"Yes",okType:"danger",cancelText:"No",onOk:e,onCancel:function(){console.log("Cancel")}})},t}return Object(f.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=document.getElementById("personal");this.listScroll=new Z.a(e,{scrollY:!0,click:!0})}},{key:"render",value:function(){var e=se.a.get("_id"),a=this.props.user,t=a.username,n=a.sex,s=a.nickName;return!t&&e&&this.props.autoLogin(),t?r.a.createElement("div",{id:"personal",className:"personal  personal-bscroll-wrapper"},r.a.createElement("div",{className:"personal-bscroll-container"},r.a.createElement("div",{className:"personal-card clearfix"},r.a.createElement(me.a,this.avatarProps,r.a.createElement(v.a,null,"default_avatar"===this.props.user.avatarUrl.slice(-18,-4)?r.a.createElement("img",{style:{width:"55px",height:"55px"},src:this.props.user.avatarUrl}):r.a.createElement("img",{src:this.props.user.avatarUrl}))),r.a.createElement("p",{className:"personal-nickName"},r.a.createElement("span",null,s)," ","male"===n?r.a.createElement(de,{type:"icon-male"}):r.a.createElement(de,{type:"icon-female"})),r.a.createElement("div",{className:"personal-info"},r.a.createElement("div",{className:"personal-info-box"},r.a.createElement("p",{className:"personal-info-num"},"15"),r.a.createElement("p",{className:"personal-info-txt"},"\u5173\u6ce8")),r.a.createElement("div",{className:"personal-line"}),r.a.createElement("div",{className:"personal-info-box "},r.a.createElement("p",{className:"personal-info-num"},"154"),r.a.createElement("p",{className:"personal-info-txt"},"\u7c89\u4e1d")),r.a.createElement("div",{className:"personal-line"}),r.a.createElement("div",{className:"personal-info-box"},r.a.createElement("p",{className:"personal-info-num"},"1536"),r.a.createElement("p",{className:"personal-info-txt"},"\u83b7\u8d5e")))),r.a.createElement("div",{className:"personal-feature"},r.a.createElement("p",{className:"personal-feature-title"},"Feature:"),r.a.createElement("div",{className:"personal-feature-Boxs"},r.a.createElement("div",{className:"personal-feature-Box"},r.a.createElement("div",{className:"personal-feature-box"},r.a.createElement(de,{type:"icon-iconzhengli-2"}))),r.a.createElement("div",{className:"personal-feature-Box"},r.a.createElement("div",{className:"personal-feature-box"},r.a.createElement(de,{type:"icon-iconzhengli-"}))),r.a.createElement("div",{className:"personal-feature-Box"},r.a.createElement("div",{className:"personal-feature-box"},r.a.createElement(de,{type:"icon-iconzhengli-1"}))),r.a.createElement("div",{className:"personal-feature-Box"},r.a.createElement("div",{className:"personal-feature-box"},r.a.createElement(de,{type:"icon-tuichu",onClick:this.showDeleteConfirm}))))),r.a.createElement("div",{className:"personal-tags"},r.a.createElement("p",{className:"personal-tags-title"},"Tag:"),r.a.createElement("div",{className:"personal-tags-box"},r.a.createElement("span",{className:"personal-tag"},"marvel\u7231\u597d\u8005"),r.a.createElement("span",{className:"personal-tag"},"\u8bf4\u5531"),r.a.createElement("span",{className:"personal-tag"},"\u6f2b\u753b"),r.a.createElement("span",{className:"personal-tag"},"\u524d\u7aef\u6280\u672f"),r.a.createElement("span",{className:"personal-tag"},"\u7f8e\u5267"),r.a.createElement("span",{className:"personal-tag"},"\u5355\u8eab\u53ef\u64a9"),r.a.createElement("span",{className:"personal-tag"},"\u793e\u4ea4\u6050\u60e7\u75c7\u60a3\u8005"),r.a.createElement("span",{className:"personal-tag"},"\u7a77"),r.a.createElement("span",{className:"personal-tag"},"DC\u7231\u597d\u8005"),r.a.createElement("span",{className:"personal-tag"},r.a.createElement(y.a,{type:"plus-circle"})))))):r.a.createElement("div",{id:"personal",className:"personal  personal-bscroll-wrapper"},r.a.createElement("div",{className:"personal-bscroll-container"},r.a.createElement("div",{className:"personal-card clearfix"},r.a.createElement("div",{onClick:this.gotoLogin,className:"personal-avatar2"},r.a.createElement(de,{type:"icon-iconzhengli-1"})),r.a.createElement("p",{onClick:this.gotoLogin,className:"personal-nickName"},r.a.createElement("span",null,"\u5c1a\u672a\u767b\u5165")),r.a.createElement("div",{className:"personal-info"},r.a.createElement("div",{className:"personal-info-box"},r.a.createElement("p",{className:"personal-info-num"},"0"),r.a.createElement("p",{className:"personal-info-txt"},"\u5173\u6ce8")),r.a.createElement("div",{className:"personal-line"}),r.a.createElement("div",{className:"personal-info-box "},r.a.createElement("p",{className:"personal-info-num"},"0"),r.a.createElement("p",{className:"personal-info-txt"},"\u7c89\u4e1d")),r.a.createElement("div",{className:"personal-line"}),r.a.createElement("div",{className:"personal-info-box"},r.a.createElement("p",{className:"personal-info-num"},"0"),r.a.createElement("p",{className:"personal-info-txt"},"\u83b7\u8d5e")))),r.a.createElement("div",{className:"personal-feature"},r.a.createElement("p",{className:"personal-feature-title"},"Feature:"),r.a.createElement("div",{className:"personal-feature-Boxs"},r.a.createElement("div",{className:"personal-feature-Box"},r.a.createElement("div",{onClick:this.gotoLogin,className:"personal-feature-box"},r.a.createElement(de,{type:"icon-iconzhengli-2"}))),r.a.createElement("div",{className:"personal-feature-Box"},r.a.createElement("div",{onClick:this.gotoLogin,className:"personal-feature-box"},r.a.createElement(de,{type:"icon-iconzhengli-"}))),r.a.createElement("div",{className:"personal-feature-Box"},r.a.createElement("div",{onClick:this.gotoLogin,className:"personal-feature-box"},r.a.createElement(de,{type:"icon-iconzhengli-1"}))),r.a.createElement("div",{className:"personal-feature-Box"},r.a.createElement("div",{onClick:this.gotoLogin,className:"personal-feature-box"},r.a.createElement(de,{type:"icon-tuichu-copy"}))))),r.a.createElement("div",{className:"personal-tags"},r.a.createElement("p",{className:"personal-tags-title"},"Tag:"),r.a.createElement("div",{className:"personal-tags-box"},r.a.createElement("span",{className:"personal-tag"},"\u5174\u8da3"),r.a.createElement("span",{className:"personal-tag"},"\u7231\u597d"),r.a.createElement("span",{className:"personal-tag"},"\u613f\u671b"),r.a.createElement("span",{className:"personal-tag"},"\u5fc3\u60c5"),r.a.createElement("span",{className:"personal-tag"},"\u6807\u7b7e")))))}}]),a}(n.Component),he=Object(i.b)(function(e){return{user:e.user}},{autoLogin:W,account_clear:M})(fe),ve=t(115),Ee=t.n(ve),ge=(t(488),y.a.createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_1368816_a7lhoitsitr.js"})),ye={home:"icon-home",options:"icon-options-copy",edit:"icon-edit-copy",personal:"icon-personal-copy"},be=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={home:"icon-home2-copy",options:"icon-options-copy",edit:"icon-edit-copy",personal:"icon-personal-copy"},t.goto=function(e){switch(t.setState(ye),e){case 1:t.props.history.replace("/"),t.setState({home:"icon-home2-copy"});break;case 2:t.props.history.replace("/options"),t.setState({options:"icon-options2-copy"});break;case 3:t.props.history.replace("/edit"),t.setState({edit:"icon-edit2-copy"});break;case 4:t.props.history.replace("/personal"),t.setState({personal:"icon-personal2-copy"});break;default:return}},t.change=function(e){switch(e){case"/":t.setState({home:"icon-home2-copy"});break;case"/options":t.setState({options:"icon-options2-copy"});break;case"/edit":t.setState({edit:"icon-edit2-copy"});break;case"/personal":t.setState({personal:"icon-personal2-copy"})}},t}return Object(f.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("asd"),Ee.a.subscribe("nav",function(a,t){e.setState(ye),e.change(t),console.log(t)}),this.setState(ye);var a=this.props.location.pathname;this.change(a)}},{key:"render",value:function(){var e=this,a=this.state,t=a.home,n=(a.options,a.edit),s=a.personal;return r.a.createElement("div",{className:"nav"},r.a.createElement("div",{className:"nav-box",onClick:function(){return e.goto(1)}},r.a.createElement(ge,{type:t})),r.a.createElement("div",{className:"nav-box",onClick:function(){return e.goto(3)}}," ",r.a.createElement(ge,{type:n})),r.a.createElement("div",{className:"nav-box",onClick:function(){return e.goto(4)}}," ",r.a.createElement(ge,{type:s})))}}]),a}(n.Component),Ne=Object(l.f)(be),we=t(216),xe=t.n(we),ke=(t(490),g.a.TextArea);function Oe(e){return new Promise(function(a,t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return a(n.result)},n.onerror=function(e){return t(e)}})}var je=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={value:"",previewVisible:!1,previewImage:"",fileList:[],editContent:""},t.handleCancel=function(){return t.setState({previewVisible:!1})},t.handlePreview=function(){var e=Object(x.a)(w.a.mark(function e(a){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.url||a.preview){e.next=4;break}return e.next=3,Oe(a.originFileObj);case 3:a.preview=e.sent;case 4:t.setState({previewImage:a.url||a.preview,previewVisible:!0});case 5:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.handleChange=function(e){var a=e.fileList;return t.setState({fileList:a})},t.onChange=function(e){var a=e.target.value;t.setState({value:a})},t.gotoLogin=function(){t.props.history.push("/login")},t.editContentHandle=function(e){var a=e.target.value;t.setState({editContent:a})},t.publish=function(){var e=[];t.state.fileList.map(function(a,t){e.push("http://localhost:4000/noteImages/".concat(a.response))});var a={from_id:t.props.user._id,date:xe.a.format(new Date,"YYYY-MM-DD HH:mm"),imgs_url:e,content:t.state.editContent,like:0,comment:[],share:0};t.props.note(a).then(function(e){console.log(t.props.state_note),t.props.state_note.from_id?(b.a.success("\u53d1\u5e03\u6210\u529f\uff01"),Ee.a.publish("nav","/"),t.props.history.replace("/")):b.a.warning("\u5f88\u62b1\u6b49\uff0c\u53d1\u5e03\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}).catch(function(e){console.log("\u5931\u8d25\u4e86")})},t}return Object(f.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=document.querySelector(".edit-wrapper");this.listScroll=new Z.a(e,{scrollY:!0,click:!0})}},{key:"render",value:function(){this.state.value;var e=this.state,a=e.previewVisible,t=e.previewImage,n=e.fileList,s=this.props.user.username,o=r.a.createElement("div",null,r.a.createElement(y.a,{type:"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"Upload"));return s||this.gotoLogin(),r.a.createElement("div",{className:"edit edit-wrapper",id:"edit"},r.a.createElement("div",{className:"edit-container"},r.a.createElement("p",{className:"edit-title"},"Edit:"),r.a.createElement(ke,{onChange:this.editContentHandle,value:this.state.editContent,id:"textarea",style:{resize:"none"},placeholder:"\u8bb0\u5f55\u6bcf\u4e00\u4e2a\u5728\u8f7b\u5927\u7684\u7f8e\u597d\u77ac\u95f4\u5427\ud83e\udd84",autosize:{minRows:5,maxRows:5}}),r.a.createElement("div",{className:"edit-img-box"},r.a.createElement("div",{className:"clearfix"},r.a.createElement(me.a,{className:"imgUpload",action:"/noteImgsUpload",listType:"picture-card",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length>=9?null:o),r.a.createElement(pe.a,{visible:a,footer:null,onCancel:this.handleCancel},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:t})))),r.a.createElement("div",{className:"edit-btn",onClick:this.publish},"\u53d1\u5e03")))}}]),a}(n.Component),Ce=Object(i.b)(function(e){return{user:e.user,state_note:e.note}},{note:function(e){return function(){var a=Object(x.a)(w.a.mark(function a(t){var n;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A(e);case 2:1===(n=a.sent).code?t((r=n.data,{type:P,data:r})):t(V(n.data));case 4:case"end":return a.stop()}var r},a)}));return function(e){return a.apply(this,arguments)}}()}})(je),_e=t(54),Se=t(217),Pe=t(218),De=t(219);function Te(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Le(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Te(t,!0).forEach(function(a){Object(De.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Te(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}var Fe={nickName:"",username:"",sex:""},Ie=[];var Be={from_id:"",data:"",avatar_url:"",imgs_url:[],content:"",like:"",comment:[],share:""};var Ue=Object(_e.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case k:return a.data;case O:return Le({},e,{msg:a.data});case j:return Fe;default:return e}},recommend:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case C:return a.data;case _:return{msg:a.data};case S:return[];default:return e}},note:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case P:return Le({state:e},a.data);case D:return{state:e,msg:a.data};default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case T:return a.data;case L:return{msg:a.data};default:return e}}}),qe=Object(_e.createStore)(Ue,Object(Pe.composeWithDevTools)(Object(_e.applyMiddleware)(Se.a)));o.a.render(r.a.createElement(i.a,{store:qe},r.a.createElement(c.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/chatroom",component:h}),r.a.createElement(l.a,{path:"/login",component:X}),r.a.createElement(l.a,{path:"/register",component:ae}),r.a.createElement(l.a,{path:"/personal",component:he}),r.a.createElement(l.a,{path:"/edit",component:Ce}),r.a.createElement(l.a,{path:"/",component:le})),r.a.createElement(ie,null),r.a.createElement(Ne,null))),document.getElementById("root"))}},[[224,1,2]]]);
//# sourceMappingURL=main.28c72135.chunk.js.map